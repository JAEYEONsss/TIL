# 0215 스터디 기록

## 데이터 모델링
### 데이터 모델링
* 개념적 데이터 모델링: 현실 세계의 중요 데이터를 추출하여 개념 세계로 옮긴다
* 논리적 데이터 모델링: 개념 세계의 데이터를 데이터베이스에 저장하는 구조로 표현
---
### 데이터 모델
* 개념적 데이터 모델: 현실 세계를 사람의 머리로 이해할 수 있도록 개념적 모델링의 결과물인 개념적 구조로 표현하는 도구다.
* 논리적 데이터 모델: 개념적 구조를 논리적으로 모델링하여 논리적 구조로 표현하는 도구다.
---
### 개체 - 관계 모델
* 개체: 현실 세계에서 조직을 운영하는 데 꼭 필요한 사람이나 사물과 같이 구별되는 모든 것을 의미
* 속성: 개체나 관계가 가지고 있는 고유한 특성
* 관계 : 개체와 개체가 맺고 있는 의미 있는 연관성
---
### ER 다이어그램
* 개체 - 관계 모델을 이용해 현실 세계를 개념적으로 모델링한 결과물을 그림으로 표현한 것.
* 사각형: 개체를 표현
* 마름모: 개체 간의 관계를 표현
* 타원: 개체나 관계의 속성을 표현
* 선: 각 요소들을 연결
---
### 관계 유형
* 1:1 관계: 개체 당 하나의 개체와 관계를 갖는 것
* 1:n 관계: 하나의 개체는 여러 개의 개체와 관계를 갖고, 반대로 하나의 개체는 한 개체와 관계를 가짐
* n:m 관계: 한 개체 당 여러 개의 개체와 관계를 갖음. 반대의 경우에도 동일
      
## 관계 테이터 모델
### 용어 정리
* 릴레이션: 하나의 개체에 관한 데이터를 2차원 테이블의 구조로 저장한 것
* 애트리뷰트/ 튜플: 릴레이션의 열과 행
* 도메인: 하나의 속성이 가질 수 있는 값들의 집합
* 널(null): 아직 모르거나 해당되는 사항이 없음을 표현하는 특별한 값
* 차수: 하나의 릴레이션에서 속성의 전체 개수
* 카디널리티: 하나의 릴레이션에서 투플의 전체 개수   

|고객 아이디 CHAR(20)|고객 이름 CHAR(20)|나이 INT|등급 CHAR(20)|직업 CHAR(10)|적립금 INT|
|---|---|---|---|---|---|
|apple|피카츄|21|gold|학생|1000|
|banana|꼬부기|22|vip|간호사|2000|
|carrot|파이리|23|gold|교사|4500|
|orange|메타몽|25|silver|학생|3000|

* CHAR, INT, ... : 도메인
* apple, 피카츄 , ... : 튜플
* 고객 아이디, 고객 이름, ... : 애트리뷰트
---
### 릴레이션의 구성
* 릴레이션 스키마: 릴레이션의 이름과 릴레이션에 포함된 모든 속성의 이름으로 정의하는 릴레이션의 논리적 구조
* 릴레이션 인스턴스: 어느 한 시점에 릴레이션에 존재하는 투플들의 집합
---
### 릴레이션의 특성
* 튜플의 유일성: 하나의 릴레이션에는 동일한 튜플이 존재할 수 없다
* 튜플의 무순서: 하나의 릴레이션에서 튜플 사이의 순서는 무의미하다
* 속성의 무순서: 하나의 릴레이션에서 속성 사이의 순서는 무의미하다
* 속성의 원자성: 속성 값으로 원자 값만 사용할 수 있다
---
### 키
#### 특성
* 유일성: 한 릴레이션에서 모든 튜플은 서로 다른 키 값을 가져야 함
* 최소성: 꼭 필요한 최소한의 속성들로만 키를 구성
#### 종류
* 슈퍼키: 유일성을 만족하는 속성 또는 속성들의 집합
* 후보키: 유일성과 최소성을 만족하는 속성 또는 속성들의 집합
* 기본키: 후보키 중에서 기본적으로 사용하기 위해 선택한 키
* 대체키: 기본키로 선택되지 못한 후보키
* 외래키: 다른 릴레이션의 기본키를 참조하는 속성 또는 속성들의 집합
---
### 관계 데이터 모델의 제약조건
* 개체 무결성 제약조건: 기본키를 구성하는 모든 속성은 널 값을 가질 수 없다.
* 참조 무결성 제약조건: 외래키는 참조할 수 없는 값을 가질 수 없다.
---
## 데이터베이스 설계
### 데이터베이스 설계의 과정(ER 모델과 릴레이션 변환 규칙을 이용한 설계)
1. 요구사항 분석
    * 데이터베이스의 용도 파악
    * 결과물: 요구사항 명세서
2. 개념적 설계
    * DBMS에 독립적인 개념적 구조 설계
    * 결과물: 개념적 스키마(ER 다이어그램)
3. 논리적 설계
    * DBMS에 적합한 논리적 구조 설계
    * 결과물: 논리적 스키마(릴레이션 스키마)
4. 물리적 설계
    * DBMS로 구현 가능한 물리적 구조 설계
    * 결과물: 물리적 스키마
5. 구현
---
* 개념적 설계   
<개체와 속성 추출> -> <관계 추출> -> <ER다이어그램 작성>

* 논리적 설계와 릴레이션 스키마 변환 규치
    1. 모든 개체는 릴레이션으로 변환한다
    2. n:m 관계는 릴레이션으로 변환한다
    3. 1:n 관계는 외래키로 표현한다
    4. 1:1 관계는 외래키로 표현한다
    5. 다중 값 속성은 독립 릴레이션으로 변환한다

---
## 정규화
### 이상 현상의 개념
* 불필요한 데이터 중복으로 인해 발생하는 부작용
* 함수 종속 관계 여러 개를 하나의 릴레이션에 표현하는 경우에 주로 발생

### 이상 현상의 종류
* 삽입 이상: 새 데이터를 삽입하기 위해 불필요한 데이터도 함께 삽입해야 하는 문제
* 갱신 이상: 중복된 튜플 중 일부 튜플만 변경하여 데이터가 불일치하게 되는 모순의 문제
* 삭제 이상: 튜플 삭제 시 꼭 필요한 데이터까지 함께 삭제되는 데이터 손실의 문제

### 함수 종속
* 어느 시점에서든 릴레이션 내의 모든 튜플에서 속성 집합 X 값에 대한 속성 집합 Y 값이 항상 하나면 "Y가 X에 함수적으로 종속되어 있다"라고 한다.
* X -> Y 로 표현 (X는 결정자, Y는 종속자)

### 정규화
* 함수 종속성을 이용하여, 릴레이션을 연관성이 있는 속성들로만 구성되도록 분해해 이상 현상이 발생하지 않는 바람직한 릴레이션으로 만들어나가는 과정

### 정규형
* 제 1 정규형: 릴레이션에 속한 모든 속성의 도메인이 원자 값으로만 구성되어 있다.
* 제 2 정규형: 릴레이션이 제1정규형에 속하고, 기본키가 아닌 모든 속성이 기본키에 완전 함수 종속되어 있다.
* 제 3 정규형: 릴레이션이 제2정규형에 속하고, 기본키가 아닌 모든 속성이 기본키에 이행적으로 함소 종속되지 않았다.
* BCNF (보이스/코드 정규형): 릴레이션의 함수 종속 관계에서 모든 결정자가 후보키다.

### 정규화 과정
1. 비정규형 릴레이션  
=> 속성의 도메인이 원자 값으로만 구성되도록 분해
2. 제1정규형 릴레이션 (모든 속성의 도메인이 원자 값으로만 구성)   
=> 부분 함수 종속 제거   
3. 제2정규형 릴레이션 (모든 속성이 기본키에 완전 함수 종속)   
=> 이행적 함수 종속 제거
4. 제3정규형 릴레이션   
=> 후보키가 아닌 결정자 제거
5. BCNF 정규형 일레이션 (모든 결정자가 후보키)
----
출처: 데이터베이스 개론 (김연희 지음)